$(document).ready((function(){let condBuscar=$(".form-control").val(""),contadorNoResultados=0,contadorResParcial=0,contadorResParcial2=0,comparaResParcial=[];$(".doi").each((function(){if("doi"==$(this).text().substr(0,3)){var link="http://dx.doi.org/"+$(this).text().substr(6),doi=$(this).text().substr(6);$(this).html($(this).html().split(" ").splice(0,2).join("")),$(this).append("&nbsp <a href="+link+">"+doi+"</a>")}if("eid"==$(this).text().substr(0,3)){var link="http://scopus.com/record/display.uri?eid="+$(this).text().substr(6)+"&origin=resultslist",eid=$(this).text().substr(6);$(this).html($(this).html().split(" ").splice(0,2).join("")),$(this).append("&nbsp <a href="+link+">"+eid+"</a>")}})),$(".boton-linea-ext").click((function(){$(this).addClass("active").siblings().removeClass("active");var self=$(this);$("div.collapse").each((function(){let contadorFiltroSi=0,tipo=[],datacat=$(this).find("div.subheading");for(let i=0;i<datacat.length;i++){tipo.push($(datacat[i]).text());let elem=$(datacat[i]).closest(".resume-item").addClass(`mix ${tipo[0]}`).removeClass("d-flex");tipo.pop(),$(datacat[i]).text()!==self.find(".filter").text()&&"ALL"!==self.find(".filter").text()?(contadorFiltroSi++,$(datacat[i]).closest(".resume-item").css("opacity","0.035"),$(datacat[i]).closest(".resume-item").css("position","absolute"),$(datacat[i]).closest(".resume-item").css("transform","translate(-200%, 0px)"),$(datacat[i]).closest(".resume-item").css("transition","transform 1500ms ease-out 0ms","opacity 1500ms linear 0ms")):($(this).closest(".accordion").css("display","block"),$(datacat[i]).closest(".resume-item").css("transform","translate(0px, 0px)"),$(datacat[i]).closest(".resume-item").css("opacity","1"),$(datacat[i]).closest(".resume-item").css("position","static"),$(datacat[i]).closest(".resume-item").css("transition","all 2000ms ease 0ms"))}contadorFiltroSi==datacat.length&&$(this).closest(".accordion").css("display","none")}))})),$(".ir-arriba").click((function(){$("body, html").animate({scrollTop:"0px"},300)})),$(window).scroll((function(){$(this).scrollTop()>0?$(".ir-arriba").slideDown(300):$(".ir-arriba").slideUp(300)}));var buscar=e=>{let cambiaResPaginacion=!1,todasCoincPublBusq=[],tituloPubl="",regex="";condBuscar=$(".form-control").val();let numCaractBusc=condBuscar.length;if(0===condBuscar.length)apply_pagination(cambiaResPaginacion);else{tituloPubl=$(".resume-item .resume-content h3.titulo"),regex=new RegExp(condBuscar,"gi"),console.log(condBuscar),console.log("Longitud busqueda: "+condBuscar.length),console.log("como estas"),$(tituloPubl).each((index,elemento)=>{$(elemento).text().match(regex)&&(console.log("Coincidencia: "+$(elemento).text()),todasCoincPublBusq.push($(elemento)))});let noResultados="No se encuentran coincidencias de publicaciones para su bÃºsqueda";0!==todasCoincPublBusq.length?apply_pagination(cambiaResPaginacion=!0,todasCoincPublBusq,tituloPubl,numCaractBusc):apply_pagination(cambiaResPaginacion,noResultados,tituloPubl,numCaractBusc)}};$('[aria-label="Search"').on("input",buscar);var muestraTodos=(itemPubli,publPorPag,limit,page,totalPubli)=>{if(comienzo=Math.max(page-1,0)*publPorPag,final=comienzo+publPorPag,0==comienzo){for(let i=comienzo;i<final;i++)$(itemPubli[i]).addClass("d-flex").removeClass("d-none");for(let i=final;i<totalPubli;i++)$(itemPubli[i]).removeClass("d-flex").addClass("d-none")}else if(final<limit){for(let i=0;i<comienzo;i++)$(itemPubli[i]).removeClass("d-flex").addClass("d-none");for(let i=comienzo;i<final;i++)$(itemPubli[i]).addClass("d-flex").removeClass("d-none");for(let i=final;i<limit;i++)$(itemPubli[i]).removeClass("d-flex").addClass("d-none")}else{for(let i=0;i<comienzo;i++)$(itemPubli[i]).removeClass("d-flex").addClass("d-none");for(let i=comienzo;i<final;i++)$(itemPubli[i]).addClass("d-flex").removeClass("d-none")}},apply_pagination=(condPag,...otros)=>{let pagination=$("#pagination"),totalPubli=0,publPorPag=10,totalPages=0,itemPubli=$(".wmod1-100 div.resume-item");totalPubli=$(".wmod1-100 div.resume-item").length;var acotaBusq=(elemGeneral,resBusq,contadorResParcial)=>{let contNoCoinc=0,resAnt=$(elemGeneral).find(".resume-content .titulo");for(let tituloPublBusq of resBusq)for(let elem of resAnt)$(tituloPublBusq).text()!==$(elem).text()&&contNoCoinc++;contNoCoinc===resBusq.length&&$(resAnt).closest(".wmod1-100 div.resume-item").addClass("d-none").removeClass("d-flex").attr("marca","false"+contadorResParcial)};totalPages=condPag&&0!==otros.length?Math.ceil(otros[0].length/10):Math.ceil(totalPubli/10),limit=10*totalPages,0!==otros.length&&(console.log("num coincidencias: "+otros[0].length),console.log("num paginas: "+totalPages)),pagination.twbsPagination("destroy");var twb_options={first:"<<",last:">>",next:">",prev:"<",totalPages:totalPages,visiblePages:4,onPageClick:(event,page)=>{if(condPag||0!==condBuscar.length)if(condPag&&otros[0].length!==otros[1].length)if($("#pagination").removeClass("d-none"),contadorResParcial<1){console.log("Hola2");for(let tituloPublBusq of otros[0])$(tituloPublBusq).closest(".wmod1-100 div.resume-item").addClass("d-flex").removeClass("d-none").attr("seleccionado","true");for(let tituloPublGeneral of otros[1])"true"!==$(tituloPublGeneral).closest(".wmod1-100 div.resume-item").attr("seleccionado")&&$(tituloPublGeneral).closest(".wmod1-100 div.resume-item").addClass("d-none").removeClass("d-flex");contadorResParcial++}else{if($(".resume-item .resume-content .noResult").hasClass("d-block")){$(".resume-item .resume-content .noResult").addClass("d-none").removeClass("d-block");for(let tituloPublBusq of otros[0])$(tituloPublBusq).closest(".wmod1-100 div.resume-item").addClass("d-flex").removeClass("d-none")}else $("[seleccionado=true]").each((index,element)=>{0===comparaResParcial.length?(acotaBusq(element,otros[0],contadorResParcial2),index===$("[seleccionado=true]").length-1&&contadorResParcial2++):otros[0].length<comparaResParcial[0]?(acotaBusq(element,otros[0],contadorResParcial2),index===$("[seleccionado=true]").length-1&&contadorResParcial2++):otros[0].length>comparaResParcial[0]?(console.log("eyyy"),$(`[marca=false${contadorResParcial2}]`).removeClass("d-none").addClass("d-flex"),$(`[marca=false${contadorResParcial2}]`).attr("seleccionado","true").removeAttr("marca"),contadorResParcial2--):acotaBusq(element,otros[0],contadorResParcial2)});0!==comparaResParcial.length&&comparaResParcial.splice(0),comparaResParcial.push(otros[0].length)}else if("string"==typeof otros[0]){for(let i=0;i<otros[1].length;i++)$(otros[1][i]).closest(".wmod1-100 div.resume-item").addClass("d-none").removeClass("d-flex"),$("#pagination").addClass("d-none");let mensaje='<div class="resume-item d-flex flex-column flex-md-row justify-content-between mb-5"><div class="resume-content resume-content-anchor"><h3 class="noResult d-block mb-0">'+otros[0]+"</h3> </div></div>";contadorNoResultados<1?($(".resume-section1 .wmod1-100").append(mensaje),$("section.resume-section1").css("min-height","0vh"),contadorNoResultados++):$(".resume-item .resume-content .noResult").addClass("d-block").removeClass("d-none")}else $(".resume-item .resume-content .noResult").addClass("d-none").removeClass("d-block"),$("section.resume-section1").css("min-height","80vh"),contadorResParcial=0,muestraTodos(itemPubli,10,limit,page,totalPubli);else muestraTodos(itemPubli,10,limit,page,totalPubli),console.log("Hola"),$('[seleccionado="true"]').each((function(){$(this).removeAttr("seleccionado")})),contadorResParcial=0}};condBuscar.length>1&&console.log("Total coincidencias: "+otros[0].length),pagination.twbsPagination(twb_options)};"/membersCEATIC/allWorks"!==$(location).attr("pathname")&&apply_pagination(!1)}));